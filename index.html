<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Node.js Page</title>
  <!-- Include Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
  <div class="container mt-5">
    <h1>Node.js Page</h1>
    <form class="row g-3">
      <div class="col-md-6">
        <label for="gunSelect" class="form-label">Select Gun:</label>
        <input type="text" id="gunSearch" class="form-control" placeholder="Search...">
        <select class="form-select" id="gunSelect">
          <!-- Populate options using JavaScript -->
        </select>
      </div>
      <div class="col-md-6">
        <label for="skinSelect" class="form-label">Select Skin:</label>
        <input type="text" id="skinSearch" class="form-control" placeholder="Search...">
        <select class="form-select" id="skinSelect">
          <!-- Populate options using JavaScript -->
        </select>
      </div>
      <div class="col-md-6">
        <label for="patternInput" class="form-label">Enter a Number (0-1000):</label>
        <input type="number" class="form-control" id="patternInput" value="1" min="0" max="1000">
      </div>
      <div class="col-md-6">
        <label for="raritySelect" class="form-label">Select Rarity:</label>
        <select class="form-select" id="raritySelect">
          <!-- Populate options using JavaScript -->
        </select>
      </div>
      <div class="col-md-12">
        <label for="floatValueInput" class="form-label">Select a Value (0-1):</label>
        <input type="text" class="form-control" id="floatValueInput" value="0.0">
      </div>

      <div class="col-md-12">
        <button type="button" class="btn btn-primary" id="calculateButton">Calculate</button>
      </div>
      <div class="col-md-12">
        <label for="outputText" class="form-label">Current Output:</label>
        <input type="text" class="form-control" id="outputText" readonly>
      </div>
    </form>

    <textarea id="outputTextarea" rows="10" cols="50"></textarea>
  </div>

  <!-- Include Bootstrap JS and your custom script -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>

    const { ipcRenderer } = require('electron');

    const gunSelect = document.getElementById('gunSelect');
    const gunSearch = document.getElementById('gunSearch');
    const skinSelect = document.getElementById('skinSelect');
    const skinSearch = document.getElementById('skinSearch');
    const raritySelect = document.getElementById('raritySelect');
    const floatValueInput = document.getElementById('floatValueInput');

    const calculateButton = document.getElementById('calculateButton');
    const outputText = document.getElementById('outputText');

    calculateButton.addEventListener('click', () => {
      // Your calculation logic here
      // For example, you can concatenate the selected values from the dropdowns
      let rarity = document.getElementById('raritySelect').value
      let gun = document.getElementById('gunSelect').value
      let skin = document.getElementById('skinSelect').value
      let pattern = document.getElementById('patternInput').value
      let float = document.getElementById('floatValueInput').value

      outputText.value = `Rarity: ${rarity}, Gun: ${gun}, Skin: ${skin}, Pattern: ${pattern}, Float: ${float}`;

      console.log([rarity, gun, skin, pattern, float])
      ipcRenderer.send('run-python', [rarity, gun, skin, pattern, float]);
    })

    ipcRenderer.on('python-output', (event, data) => {
      outputTextarea.value += data;
    });

    // Load gun_ids.json and populate the gunSelect dropdown
    fetch('gun_ids.json')
      .then(response => response.json())
      .then(data => {
        Object.keys(data).forEach(key => {
          const option = new Option(data[key], key);
          gunSelect.appendChild(option);
        });
      });

    // Load skin_ids.json and populate the skinSelect dropdown
    fetch('skin_ids.json')
      .then(response => response.json())
      .then(data => {
        Object.keys(data).forEach(key => {
          const option = new Option(data[key], key);
          skinSelect.appendChild(option);
        });
      });

    // Load rarity_ids.json and populate the raritySelect dropdown
    fetch('rarity_ids.json')
      .then(response => response.json())
      .then(data => {
        Object.keys(data).forEach(key => {
          const option = new Option(data[key], key);
          raritySelect.appendChild(option);
        });
      });

  </script>
</body>
</html>
